<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>New Authentication (NKeys and User Credentials) :: NATS Documentation</title>
    <link rel="canonical" href="https://hooksie1.github.io/nats-documentation/nats-go/main/auth.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/custom.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://hooksie1.github.io/nats-documentation">NATS Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Links</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://nats.io" target="_blank">NATS.io</a>
            <a class="navbar-item" href="https://twitter.com/nats_io" target="_blank">Twitter</a>
            <a class="navbar-item" href="https://slack.nats.io" target="_blank">Slack</a>
            <a class="navbar-item" href="https://github.com/nats-io" target="_blank">GitHub</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="nats-go" data-version="main">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Nats Go Client</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../nats-documentation/index.html">NATS Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../nats-documentation/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Nats Go Client</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../nats-py/main/index.html">Nats Python3 Client</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../nats-py/main/index.html">main</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
      <div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Nats Go Client</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basic.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jetstream-basic.html">JetStream Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jetstream-management.html">JetStream Basic Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="encoded-connections.html">Encoded Connections</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="auth.html">New Authentication (Nkeys and User Crednetials)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tls.html">TLS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="channels.html">Using Go Channels (netchan)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="wildcard.html">Wildcard Subscriptions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="queue.html">Queue Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced.html">Advanced Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="clustered.html">Clustered Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="context.html">Context Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../nats-documentation/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Nats Go Client</a></li>
    <li>Examples</li>
    <li><a href="auth.html">New Authentication (Nkeys and User Crednetials)</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/hooksie1/nats.go/edit/documentation-site/docs/modules/ROOT/pages/auth.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">New Authentication (NKeys and User Credentials)</h1>
<div class="paragraph">
<p>This requires server with version &gt;= 2.0.0</p>
</div>
<div class="paragraph">
<p>NATS servers have a new security and authentication mechanism to authenticate with user credentials and Nkeys. The simplest form is to use the helper method UserCredentials(credsFilepath).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">nc, err := nats.Connect(url, nats.UserCredentials("user.creds"))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The helper methods creates two callback handlers to present the user JWT and sign the nonce challenge from the server. The core client library never has direct access to your private key and simply performs the callback for signing the server challenge. The helper will load and wipe and erase memory it uses for each connect or reconnect.</p>
</div>
<div class="paragraph">
<p>The helper also can take two entries, one for the JWT and one for the NKey seed file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">nc, err := nats.Connect(url, nats.UserCredentials("user.jwt", "user.nk"))</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also set the callback handlers directly and manage challenge signing directly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">nc, err := nats.Connect(url, nats.UserJWT(jwtCB, sigCB))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bare Nkeys are also supported. The nkey seed should be in a read only file, e.g. seed.txt</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; cat seed.txt
# This is my seed nkey!
SUAGMJH5XLGZKQQWAWKRZJIGMOU4HPFUYLXJMXOO5NLFEO2OOQJ5LPRDPM</pre>
</div>
</div>
<div class="paragraph">
<p>This is a helper function which will load and decode and do the proper signing for the server nonce. It will clear memory in between invocations. You can choose to use the low level option and provide the public key and a signature callback on your own.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">opt, err := nats.NkeyOptionFromSeed("seed.txt")
nc, err := nats.Connect(serverUrl, opt)

// Direct
nc, err := nats.Connect(serverUrl, nats.Nkey(pubNkey, sigCB))</code></pre>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
